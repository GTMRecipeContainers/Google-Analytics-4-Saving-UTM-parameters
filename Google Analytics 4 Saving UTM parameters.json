{
    "exportFormatVersion": 2,
    "exportTime": "2024-08-13 19:45:20",
    "containerVersion": {
        "path": "accounts/4701529512/containers/96160116/versions/0",
        "accountId": "4701529512",
        "containerId": "96160116",
        "containerVersionId": "0",
        "container": {
            "path": "accounts/4701529512/containers/96160116",
            "accountId": "4701529512",
            "containerId": "96160116",
            "name": "28 - Google Analytics 4 Saving UTM parameters",
            "publicId": "GTM-TB3C57T",
            "usageContext": [
                "WEB"
            ],
            "fingerprint": "1667333889299",
            "tagManagerUrl": "https://tagmanager.google.com/#/container/accounts/4701529512/containers/96160116/workspaces?apiLink=container",
            "features": {
                "supportUserPermissions": true,
                "supportEnvironments": true,
                "supportWorkspaces": true,
                "supportGtagConfigs": false,
                "supportBuiltInVariables": true,
                "supportClients": false,
                "supportFolders": true,
                "supportTags": true,
                "supportTemplates": true,
                "supportTriggers": true,
                "supportVariables": true,
                "supportVersions": true,
                "supportZones": true,
                "supportTransformations": false
            },
            "tagIds": [
                "GTM-TB3C57T"
            ]
        },
        "tag": [
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "tagId": "54",
                "name": "Live Google Analytics 4 - E-commerce",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "sendEcommerceData",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "eventSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "transaction_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{DLV - Transaction ID}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "value"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{DLV - Revenue}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "items"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{DLV - Purchase Products}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "shipping"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{DLV - Shipping}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "tax"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{DLV - Tax}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "coupon"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{DLV - Coupon}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "currency"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{DLV - Currency}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "tag_name"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "Live Google Analytics 4 - E-commerce"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "tag_category"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "E-commerce"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "tag_date_creation"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "19/05/2024"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_source"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{session_utm_source}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_medium"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{session_utm_medium}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_campaign"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{session_utm_campaign}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_content"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{session_utm_content}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_term"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{session_utm_term}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enhancedUserId",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "purchase"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "measurementIdOverride",
                        "value": "{{Live Google Analytics 4 ID}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventSettingsVariable",
                        "value": "{{Event Variable Settings}}"
                    }
                ],
                "fingerprint": "1718926430956",
                "firingTriggerId": [
                    "27"
                ],
                "parentFolderId": "28",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "tagId": "57",
                "name": "Live Google Analytics 4 - Pageview",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "sendEcommerceData",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "eventSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "tag_name"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "Live Google Analytics 4 - Pageview"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "tag_date_creation"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "19/05/2024"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "tag_category"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "Pageview"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_source"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{cookie_utm_source}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_medium"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{cookie_utm_medium}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_campaign"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{cookie_utm_campaign}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_content"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{cookie_utm_content}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "utm_term"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{cookie_utm_term}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "page_location"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{Exclude Query Parameters}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enhancedUserId",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "page_view"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "measurementIdOverride",
                        "value": "{{Live Google Analytics 4 ID}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventSettingsVariable",
                        "value": "{{Event Variable Settings}}"
                    }
                ],
                "fingerprint": "1718926417508",
                "firingTriggerId": [
                    "2147479553"
                ],
                "parentFolderId": "28",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "tagId": "63",
                "name": "Live Google Analytics 4 - Config",
                "type": "googtag",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "tagId",
                        "value": "{{Live Google Analytics 4 ID}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "configSettingsVariable",
                        "value": "{{Configuration Settings Variable}}"
                    }
                ],
                "fingerprint": "1718926442449",
                "firingTriggerId": [
                    "2147479573"
                ],
                "parentFolderId": "28",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            }
        ],
        "trigger": [
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "triggerId": "27",
                "name": "Live E-commerce Confirmation",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "purchase"
                            }
                        ]
                    }
                ],
                "fingerprint": "1667333910507",
                "parentFolderId": "25"
            }
        ],
        "variable": [
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "4",
                "name": "cookie_utm_term",
                "type": "k",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "decodeCookie",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "utm_term"
                    }
                ],
                "fingerprint": "1667333910499",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "5",
                "name": "query_utm_source",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_source"
                    }
                ],
                "fingerprint": "1667333910499",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "6",
                "name": "cookie_utm_source",
                "type": "k",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "decodeCookie",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "utm_source"
                    }
                ],
                "fingerprint": "1667333910500",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "7",
                "name": "session_utm_source",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  if ({{query_utm_source}}) {\n\t// utm_source found in URL. Set in cooke and update\n    // this variable.\n    window.document.cookie = \"utm_source={{query_utm_source}}; ; path=/\";\n    return {{query_utm_source}};\n  } else {\n    // No utm_source found in URL. Load from cookie \n  \treturn {{cookie_utm_source}};\n  }\n}"
                    }
                ],
                "fingerprint": "1667333910511",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "9",
                "name": "DLV - Shipping",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.purchase.actionField.shipping"
                    }
                ],
                "fingerprint": "1667333910501",
                "parentFolderId": "8",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "11",
                "name": "query_utm_term",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_term"
                    }
                ],
                "fingerprint": "1667333910501",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "12",
                "name": "query_utm_campaign",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_campaign"
                    }
                ],
                "fingerprint": "1667333910502",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "13",
                "name": "cookie_utm_campaign",
                "type": "k",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "decodeCookie",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "utm_campaign"
                    }
                ],
                "fingerprint": "1667333910502",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "14",
                "name": "session_utm_campaign",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  if ({{query_utm_campaign}}) {\n\t// utm_campaign found in URL. Set in cooke and update\n    // this variable.\n    window.document.cookie = \"utm_campaign={{query_utm_campaign}}; ; path=/\";\n    return {{query_utm_campaign}};\n  } else {\n    // No utm_campaign found in URL. Load from cookie \n  \treturn {{cookie_utm_campaign}};\n  }\n}"
                    }
                ],
                "fingerprint": "1667333910511",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "15",
                "name": "cookie_utm_content",
                "type": "k",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "decodeCookie",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "utm_content"
                    }
                ],
                "fingerprint": "1667333910503",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "16",
                "name": "GBP Currency Code",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "GBP"
                    }
                ],
                "fingerprint": "1667333910503",
                "parentFolderId": "10",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "17",
                "name": "DLV - Transaction ID",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.purchase.actionField.id"
                    }
                ],
                "fingerprint": "1667333910503",
                "parentFolderId": "8",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "18",
                "name": "query_utm_medium",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_medium"
                    }
                ],
                "fingerprint": "1667333910504",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "20",
                "name": "cookie_utm_medium",
                "type": "k",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "decodeCookie",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "utm_medium"
                    }
                ],
                "fingerprint": "1667333910505",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "21",
                "name": "session_utm_medium",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  if ({{query_utm_medium}}) {\n\t// utm_medium found in URL. Set in cooke and update\n    // this variable.\n    window.document.cookie = \"utm_medium={{query_utm_medium}}; ; path=/\";\n    return {{query_utm_medium}};\n  } else {\n    // No utm_medium found in URL. Load from cookie \n  \treturn {{cookie_utm_medium}};\n  }\n}"
                    }
                ],
                "fingerprint": "1667333910511",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "24",
                "name": "DLV - Coupon",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.purchase.actionField.coupon"
                    }
                ],
                "fingerprint": "1667333910506",
                "parentFolderId": "8",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "29",
                "name": "Live Google Analytics 4 ID",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "G-T3K5R11SXB"
                    }
                ],
                "fingerprint": "1667333910508",
                "parentFolderId": "22",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "30",
                "name": "DLV - Tax",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.purchase.actionField.tax"
                    }
                ],
                "fingerprint": "1667333910508",
                "parentFolderId": "8",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "31",
                "name": "query_utm_content",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_content"
                    }
                ],
                "fingerprint": "1667333910508",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "32",
                "name": "session_utm_content",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  if ({{query_utm_content}}) {\n\t// utm_content found in URL. Set in cooke and update\n    // this variable.\n    window.document.cookie = \"utm_content={{query_utm_content}}; ; path=/\";\n    return {{query_utm_content}};\n  } else {\n    // No utm_content found in URL. Load from cookie \n  \treturn {{cookie_utm_content}};\n  }\n}"
                    }
                ],
                "fingerprint": "1667333910512",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "33",
                "name": "session_utm_term",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  if ({{query_utm_term}}) {\n\t// utm_term found in URL. Set in cooke and update\n    // this variable.\n    window.document.cookie = \"utm_term={{query_utm_term}}; ; path=/\";\n    return {{query_utm_term}};\n  } else {\n    // No utm_term found in URL. Load from cookie \n  \treturn {{cookie_utm_term}};\n  }\n}"
                    }
                ],
                "fingerprint": "1667333910512",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "35",
                "name": "DLV - Purchase Products",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.purchase.products"
                    }
                ],
                "fingerprint": "1667333910509",
                "parentFolderId": "8",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "36",
                "name": "DLV - Revenue",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.purchase.actionField.revenue"
                    }
                ],
                "fingerprint": "1667333910510",
                "parentFolderId": "8",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "42",
                "name": "TimeStamp",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  return new Date().getTime();\n}"
                    }
                ],
                "fingerprint": "1718925927887",
                "parentFolderId": "10",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "44",
                "name": "Event Variable Settings",
                "type": "gtes",
                "parameter": [
                    {
                        "type": "LIST",
                        "key": "eventSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "container_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{Container ID}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "container_version"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{Container Version}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "timestamp"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{TimeStamp}}"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1718925927888",
                "parentFolderId": "43"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "46",
                "name": "dl - timing.dom_interactive_time",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "timing.dom_interactive_time"
                    }
                ],
                "fingerprint": "1718925927889",
                "parentFolderId": "45",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "47",
                "name": "dl - timing.server_response_time",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "timing.server_response_time"
                    }
                ],
                "fingerprint": "1718925927890",
                "parentFolderId": "45",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "49",
                "name": "dl - timing.content_load_time",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "timing.content_load_time"
                    }
                ],
                "fingerprint": "1718925927891",
                "parentFolderId": "45",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "50",
                "name": "dl - timing.page_load_time",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "timing.page_load_time"
                    }
                ],
                "fingerprint": "1718925927892",
                "parentFolderId": "45",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "53",
                "name": "DLV - Currency",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.purchase.actionField.currency"
                    }
                ],
                "fingerprint": "1718925927894",
                "parentFolderId": "8",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "56",
                "name": "Exclude Query Parameters",
                "type": "cvt_96160116_55",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "select",
                        "value": "black"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "query",
                        "value": "true"
                    },
                    {
                        "type": "LIST",
                        "key": "targetQueries",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "query",
                                        "value": "utm_term"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "query",
                                        "value": "utm_content"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "query",
                                        "value": "gtm_debug"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "query",
                                        "value": "fbclid"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "targetURL",
                        "value": "{{Page URL}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "hash",
                        "value": "false"
                    }
                ],
                "fingerprint": "1718925927896",
                "parentFolderId": "10",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "58",
                "name": "DLV - View Products",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.detail.products"
                    }
                ],
                "fingerprint": "1718925927897",
                "parentFolderId": "8",
                "formatValue": {}
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "62",
                "name": "Configuration Settings Variable",
                "type": "gtcs",
                "parameter": [
                    {
                        "type": "LIST",
                        "key": "configSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "send_page_view"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "false"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1718925927899",
                "parentFolderId": "43"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "variableId": "64",
                "name": "DLV - Checkout",
                "type": "v",
                "parameter": [
                    {
                        "type": "INTEGER",
                        "key": "dataLayerVersion",
                        "value": "2"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "ecommerce.checkout.products"
                    }
                ],
                "fingerprint": "1718925927901",
                "parentFolderId": "8",
                "formatValue": {}
            }
        ],
        "folder": [
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "folderId": "3",
                "name": "UTM",
                "fingerprint": "1667333910498"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "folderId": "8",
                "name": "Data Layer Variables",
                "fingerprint": "1667333910500"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "folderId": "10",
                "name": "Other Variables",
                "fingerprint": "1667333910501"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "folderId": "22",
                "name": "Platform Variables",
                "fingerprint": "1667333910505"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "folderId": "25",
                "name": "E-commerce Triggers",
                "fingerprint": "1667333910506"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "folderId": "28",
                "name": "Google Analytics 4 Tags",
                "fingerprint": "1667333910507"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "folderId": "43",
                "name": "Settings Variables",
                "fingerprint": "1718925927887"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "folderId": "45",
                "name": "Timing Variables",
                "fingerprint": "1718925927889"
            }
        ],
        "builtInVariable": [
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "PAGE_URL",
                "name": "Page URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "PAGE_HOSTNAME",
                "name": "Page Hostname"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "PAGE_PATH",
                "name": "Page Path"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "REFERRER",
                "name": "Referrer"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "EVENT",
                "name": "Event"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "CLICK_ELEMENT",
                "name": "Click Element"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "CLICK_CLASSES",
                "name": "Click Classes"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "CLICK_ID",
                "name": "Click ID"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "CLICK_TARGET",
                "name": "Click Target"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "CLICK_URL",
                "name": "Click URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "CLICK_TEXT",
                "name": "Click Text"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "FORM_ELEMENT",
                "name": "Form Element"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "FORM_CLASSES",
                "name": "Form Classes"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "FORM_ID",
                "name": "Form ID"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "FORM_TARGET",
                "name": "Form Target"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "FORM_URL",
                "name": "Form URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "FORM_TEXT",
                "name": "Form Text"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "ERROR_MESSAGE",
                "name": "Error Message"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "ERROR_URL",
                "name": "Error URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "ERROR_LINE",
                "name": "Error Line"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "NEW_HISTORY_FRAGMENT",
                "name": "New History Fragment"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "OLD_HISTORY_FRAGMENT",
                "name": "Old History Fragment"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "NEW_HISTORY_STATE",
                "name": "New History State"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "OLD_HISTORY_STATE",
                "name": "Old History State"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "HISTORY_SOURCE",
                "name": "History Source"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "CONTAINER_VERSION",
                "name": "Container Version"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "DEBUG_MODE",
                "name": "Debug Mode"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "RANDOM_NUMBER",
                "name": "Random Number"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "CONTAINER_ID",
                "name": "Container ID"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "HTML_ID",
                "name": "HTML ID"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "ENVIRONMENT_NAME",
                "name": "Environment Name"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "VIDEO_PROVIDER",
                "name": "Video Provider"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "VIDEO_URL",
                "name": "Video URL"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "VIDEO_TITLE",
                "name": "Video Title"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "VIDEO_DURATION",
                "name": "Video Duration"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "VIDEO_PERCENT",
                "name": "Video Percent"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "VIDEO_VISIBLE",
                "name": "Video Visible"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "VIDEO_STATUS",
                "name": "Video Status"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "VIDEO_CURRENT_TIME",
                "name": "Video Current Time"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "SCROLL_DEPTH_THRESHOLD",
                "name": "Scroll Depth Threshold"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "SCROLL_DEPTH_UNITS",
                "name": "Scroll Depth Units"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "SCROLL_DEPTH_DIRECTION",
                "name": "Scroll Direction"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "ELEMENT_VISIBILITY_RATIO",
                "name": "Percent Visible"
            },
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "type": "ELEMENT_VISIBILITY_TIME",
                "name": "On-Screen Duration"
            }
        ],
        "fingerprint": "1723578320381",
        "tagManagerUrl": "https://tagmanager.google.com/#/versions/accounts/4701529512/containers/96160116/versions/0?apiLink=version",
        "customTemplate": [
            {
                "accountId": "4701529512",
                "containerId": "96160116",
                "templateId": "55",
                "name": "Trim Query",
                "fingerprint": "1718925927895",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"displayName\": \"Trim Query\",\n  \"description\": \"Returns a string obtained by deleting an arbitrary query from the specified variable.\",\n  \"securityGroups\": [],\n  \"categories\": [\n    \"UTILITY\"\n  ],\n  \"id\": \"cvt_temp_public_id\",\n  \"type\": \"MACRO\",\n  \"version\": 1,\n  \"containerContexts\": [\n    \"WEB\"\n  ],\n  \"brand\": {\n    \"displayName\": \"Ayudante\",\n    \"id\": \"github.com_Ayudante\"\n  }\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"SELECT\",\n    \"name\": \"targetURL\",\n    \"displayName\": \"Target URL\",\n    \"macrosInSelect\": true,\n    \"selectItems\": [\n      {\n        \"value\": \"elementURL\",\n        \"displayValue\": \"Element URL (Click URL, Form URL)\"\n      },\n      {\n        \"value\": \"pageURL\",\n        \"displayValue\": \"Page URL\"\n      },\n      {\n        \"value\": \"pageURLAll\",\n        \"displayValue\": \"Page URL All (Page URL + Fragment)\"\n      }\n    ],\n    \"simpleValueType\": true,\n    \"help\": \"Specify a choice or URL format variable.\\u003cbr\\u003e\\n\\u003cb\\u003enote:\\u003c/b\\u003e Do not use the excerpt of only the query without \\u0027?\\u0027 Or the excerpt of only the hash tag without \\u0027#\\u0027.\"\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"targetFrom\",\n    \"displayName\": \"Remove from what\",\n    \"groupStyle\": \"NO_ZIPPY\",\n    \"subParams\": [\n      {\n        \"help\": \"Check to remove from the target variable query (\\\"? ~~\\\").\",\n        \"alwaysInSummary\": true,\n        \"defaultValue\": true,\n        \"name\": \"query\",\n        \"checkboxText\": \"Queries\",\n        \"type\": \"CHECKBOX\"\n      },\n      {\n        \"help\": \"Check to remove from the target variable fragment (\\\"# ~~\\\").\",\n        \"defaultValue\": false,\n        \"name\": \"hash\",\n        \"checkboxText\": \"Fragment\",\n        \"type\": \"CHECKBOX\"\n      }\n    ]\n  },\n  {\n    \"type\": \"SELECT\",\n    \"name\": \"select\",\n    \"displayName\": \"Select to delete\",\n    \"macrosInSelect\": false,\n    \"selectItems\": [\n      {\n        \"value\": \"black\",\n        \"displayValue\": \"Black list\"\n      },\n      {\n        \"value\": \"white\",\n        \"displayValue\": \"White list\"\n      }\n    ],\n    \"simpleValueType\": true,\n    \"defaultValue\": \"black\",\n    \"alwaysInSummary\": true\n  },\n  {\n    \"name\": \"targetQueries\",\n    \"simpleTableColumns\": [\n      {\n        \"defaultValue\": \"\",\n        \"displayName\": \"Delete query key\",\n        \"name\": \"query\",\n        \"type\": \"TEXT\",\n        \"isUnique\": true,\n        \"valueHint\": \"e.g. _ga\"\n      }\n    ],\n    \"type\": \"SIMPLE_TABLE\",\n    \"alwaysInSummary\": true,\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"select\",\n        \"paramValue\": \"black\",\n        \"type\": \"EQUALS\"\n      }\n    ]\n  },\n  {\n    \"type\": \"LABEL\",\n    \"name\": \"helpTextBlack\",\n    \"displayName\": \"The entered \\\"Delete query key\\\" is used judge by an exact match (\\\"equals\\\"), and if it matches, the key and value are deleted.\",\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"select\",\n        \"paramValue\": \"black\",\n        \"type\": \"EQUALS\"\n      }\n    ]\n  },\n  {\n    \"name\": \"filterQueries\",\n    \"simpleTableColumns\": [\n      {\n        \"defaultValue\": \"\",\n        \"displayName\": \"Keep query key\",\n        \"name\": \"query\",\n        \"type\": \"TEXT\",\n        \"isUnique\": true,\n        \"valueHint\": \"e.g. _ga\"\n      }\n    ],\n    \"type\": \"SIMPLE_TABLE\",\n    \"alwaysInSummary\": true,\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"select\",\n        \"paramValue\": \"white\",\n        \"type\": \"EQUALS\"\n      }\n    ]\n  },\n  {\n    \"type\": \"LABEL\",\n    \"name\": \"helpTextWhite\",\n    \"displayName\": \"The input \\\"Delete query key\\\" is determined by an exact match (\\\"equals\\\"), otherwise the key and value will be deleted.\",\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"select\",\n        \"paramValue\": \"white\",\n        \"type\": \"EQUALS\"\n      }\n    ]\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\n// -------- API required\n// const log = require('logToConsole');\n// data.targetURL: (elementURL | pageURL | pageURLAll | {{variable}})\n// data.query: true\n// data.hash: true\n// data.select: black | white\n// data.targetQueries: [{\"query\":\"_ga\"},{\"query\":\"_gac\"}]\n// data.filterQueries: [{\"query\":\"_ga\"},{\"query\":\"_gac\"}]\n\n// --------- Default Settings\n// ---- Start Setting\nvar Var = data.targetURL;\t\t\t\t\t// Target URL\nconst select = data.select;\t\t\t\t\t// Select to delete(black | white)\nconst delQuery = data.targetQueries || [];\t\t\t// Delete query key(black)\nconst filterQuery = data.filterQueries || [];\t\t\t// Delete query key(white)\nconst delTarget = [data.query, data.hash];\t// Remove from what0:Queries1:Fragment\n\n// ---- Get Target URL\nswitch(Var){\n\tcase 'elementURL':\n\t\tvar get = require('copyFromDataLayer');\n\t\tVar = get('gtm.elementUrl');\n\t\tbreak;\n\tcase 'pageURL':\n\t\tvar get = require('getUrl');\n\t\tVar = get('protocol') +'://' + get('host') + get('path');\n\t\tif(get('query')){\n\t\t\tVar += '?' + get('query');\n\t\t}\n\t\tbreak;\n\tcase 'pageURLAll':\n\t\tvar get = require('getUrl');\n\t\tVar = get('protocol') +'://' + get('host') + get('path');\n\t\tif(get('query')){\n\t\t\tVar += '?' + get('query');\n\t\t}\n\t\tif(get('fragment')){\n\t\t\tVar += '#' + get('fragment');\n\t\t}\n\t\tbreak;\n}\n\n// --------- Processing\nif(Var !== undefined){\n\t// ---- Split URL\n\tvar path = Var.split('?')[0].split('#')[0];\n\tvar query = null;\n\tvar hash = null;\n\tif(Var.indexOf('?') >= 0){\t// 1st '?' to before 1st '#'\n\t\tquery = Var.split('#')[0].split('?').map(function(valQuery, index){\n\t\t\treturn index !== 0 ? valQuery : undefined;\n\t\t}).join('');\n\t}\n\tif(Var.indexOf('#') >= 0){\t// 1st '#' to end\n\t\thash = Var.split('#').map(function(valQuery, index){\n\t\t\treturn index !== 0 ? valQuery : undefined;\n\t\t}).join('');\n\t}\n\n\t// ---- Target Key query remove\n\tconst omit = function(del, target, word){\t// Black List\n\t\tif(delTarget[del] && target){\n\t\t\t// Search & destroy\n\t\t\t//var queries = target.split('&');\n\t\t\t// hashtagaaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555&bbb=tester?test=000&aaa=111&bbb=222&ccc=333\n\t\t\tif(del == 1 && target.indexOf('?') >= 0){\t// Split query\n\t\t\t\t// query in hash\n\t\t\t\tvar queries = target.split('?')[0].split('&');\n\t\t\t\tqueries[queries.length - 1] += '?' + target.split('?')[1];\n\t\t\t}else{\n\t\t\t\t// normal hash\n\t\t\t\tvar queries = target.split('&');\n\t\t\t}\n\t\t\tfor(var i = queries.length - 1; i >= 0; i--){\t// For Query length from end to start\n\t\t\t\tfor(var j = 0; j < delQuery.length; j++){\t// For Delete Query length from start to end\n\t\t\t\t\tif(queries[i].indexOf(delQuery[j].query + '=') == 0){\n\t\t\t\t\t\t// If: Checking Delete target is true\n\t\t\t\t\t\tqueries.splice(i, 1);\t// Target delete\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(queries.length >= 1){\n\t\t\t\t// If: Queries is be.\n\t\t\t\ttarget = queries.join('&');\n\t\t\t}else{\n\t\t\t\t// If: Queries is none.\n\t\t\t\ttarget = '';\n\t\t\t}\n\t\t}\n\t\tif(target){\n\t\t\tif(target.indexOf(word) !== 0){\n\t\t\t\ttarget = word + target;\n\t\t\t}\n\t\t\tpath += target;\n\t\t}\n\t};\n\tconst filtering = function(del, target, word){\t// White list\n\t\tif(delTarget[del] && target){\n\t\t\t// Search & destroy\n\t\t\tif(del == 1 && target.indexOf('?') >= 0){\t// Split query\n\t\t\t\t// query in hash\n\t\t\t\tvar queries = target.split('?')[0].split('&');\n\t\t\t\tqueries[queries.length - 1] += '?' + target.split('?')[1];\n\t\t\t}else{\n\t\t\t\t// normal hash\n\t\t\t\tvar queries = target.split('&');\n\t\t\t}\n\t\t\tfor(var i = queries.length - 1; i >= 0; i--){\t// For Query length from end to start\n\t\t\t\tlet flag = false;\n\t\t\t\tfor(var j = 0; j < filterQuery.length; j++){\t// For Delete Query length from start to end\n\t\t\t\t\tif(queries[i].indexOf(filterQuery[j].query + '=') == 0){\n\t\t\t\t\t\t// If: Checking Delete target is true\n\t\t\t\t\t\tflag = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!flag){\n\t\t\t\t\tqueries.splice(i, 1);\t// Target delete\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(queries.length >= 1){\n\t\t\t\t// If: Queries is be.\n\t\t\t\ttarget = queries.join('&');\n\t\t\t}else{\n\t\t\t\t// If: Queries is none.\n\t\t\t\ttarget = '';\n\t\t\t}\n\t\t}\n\t\tif(target){\n\t\t\tif(target.indexOf(word) !== 0){\n\t\t\t\ttarget = word + target;\n\t\t\t}\n\t\t\tpath += target;\n\t\t}\n\t};\n\n\tswitch(select){\n\t\tcase 'black':\n\t\t\tomit(0, query, '?');\t// Remove from queries.\n\t\t\tomit(1, hash, '#');\t// Remove from fragment.\n\t\t\tbreak;\n\t\tcase 'white':\n\t\t\tfiltering(0, query, '?');\t// Remove from queries.\n\t\t\tfiltering(1, hash, '#');\t// Remove from fragment.\n\t\t\tbreak;\n\t}\n\n\t// ---- Complete.\n\treturn path;\n}else{\n\treturn undefined;\n}\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_data_layer\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"allowedKeys\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"specific\"\n          }\n        },\n        {\n          \"key\": \"keyPatterns\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"gtm.elementUrl\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"get_url\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urlParts\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        },\n        {\n          \"key\": \"queriesAllowed\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios:\n- name: Basic - Black - query\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/?aaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555#hashtagaaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555',\n      query: true,\n      hash: false,\n      select: 'black',\n      targetQueries: [{'query': 'aaa'},{'query': 'bbb'}]\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n- name: Basic - Black - hash\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/?aaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555#hashtagaaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555',\n      query: false,\n      hash: true,\n      select: 'black',\n      targetQueries: [{'query': 'aaa'},{'query': 'bbb'}]\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n- name: Basic - Black - query and hash\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/?aaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555#hashtagaaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555',\n      query: true,\n      hash: true,\n      select: 'black',\n      targetQueries: [{'query': 'aaa'},{'query': 'bbb'}]\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n- name: Basic - White - query\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/?aaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555#hashtag',\n      query: true,\n      hash: false,\n      select: 'white',\n      filterQueries: [{'query': 'aaa'},{'query': 'bbb'}]\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n- name: Basic - White - hash\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/?aaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555#hashtagaaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555&singlehash',\n      query: false,\n      hash: true,\n      select: 'white',\n      filterQueries: [{'query': 'aaa'},{'query': 'bbb'}, {'query': 'singlehash'}]\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n- name: Basic - White - query and hash\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/?aaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555#hashtagaaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555',\n      query: true,\n      hash: true,\n      select: 'white',\n      filterQueries: [{'query': 'aaa'},{'query': 'bbb'}]\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n- name: Rare - White - query and hash - 2\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/?aaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555#hashtagaaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555?test=000&aaa=111',\n      query: true,\n      hash: true,\n      select: 'white',\n      filterQueries: [{'query': 'aaa'},{'query': 'bbb'}]\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n- name: Rare - Black - hash - 2a\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/?aaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555#hashtagaaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555?test=000&aaa=111',\n      query: false,\n      hash: true,\n      select: 'black',\n      targetQueries: [{'query': 'aaa'},{'query': 'bbb'}]\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n- name: Rare - Black - hash - 2b\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/#hashtagaaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555&bbb=tester?test=000&aaa=111&bbb=222&ccc=333',\n      query: false,\n      hash: true,\n      select: 'black',\n      targetQueries: [{'query': 'aaa'},{'query': 'bbb'}]\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n- name: Basic - White - query - non setting\n  code: |-\n    const mockData = {\n      // Mocked field values\n      targetURL: 'https://example.com/test1/test2/test3/?aaa=111&bbb=222&ccc=333&aaa=444&aaabbbccc=555#hashtag',\n      query: true,\n      hash: false,\n      select: 'white'  // white|black\n    };\n\n    // Call runCode to run the template's code.\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isNotEqualTo(undefined);\n\n\n___NOTES___\n\nCreated on 2020/1/10 20:56:30\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "Ayudante",
                    "repository": "trim-query",
                    "version": "f5b37fe2eee4c5f07b2ea3854b4adbb402c536a3",
                    "signature": "cb1d553defa4674219b8bf0e6044432f50556d805227e2390d8b4d5c3226e46f"
                }
            }
        ]
    }
}